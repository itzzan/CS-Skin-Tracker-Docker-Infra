brokerClusterName = DefaultCluster
brokerName = broker-a
brokerId = 0
deleteWhen = 04
fileReservedTime = 48
brokerRole = ASYNC_MASTER
flushDiskType = ASYNC_FLUSH
# 允许自动创建 Topic (生产环境通常关闭，但开发环境必须开启)
autoCreateTopicEnable = true

# 【核心中的核心】
# 必须写你 Mac 的局域网 IP，绝对不能写 localhost 或 127.0.0.1
# 如果你的 IP 变了（比如换了 WiFi），这里必须改！
brokerIP1 = 192.168.149.186

# ================= 性能调优参数 (M4 Pro 专享版) =================

# 1. 增加处理发送消息的线程池大小 (默认只有 1 核心数，高并发不够)
sendMessageThreadPoolNums = 64
pullMessageThreadPoolNums = 64

# 2. 网络缓冲区 (解决 Timeout 和 TooMuchRequest)
# 调大 Socket 发送/接收缓冲区，防止 Docker 网络桥接丢包
serverSocketSndBufSize = 65535
serverSocketRcvBufSize = 65535

# 3. 操作系统 PageCache 优化
# 消息在 PageCache 中停留时间，防止频繁刷盘导致 IO 阻塞
osPageCacheBusyTimeOutMills = 2000

# 4. 发送队列等待时间
# 默认 200ms 太短，高并发下 Broker 稍微卡顿就会导致客户端报错
waitTimeMillsInSendQueue = 1000

# 5. 开启高并发锁优化
useReentrantLockWhenPutMessage = true

# 6. 开启 Netty 内存池 (减少 GC)
serverPooledByteBufAllocatorEnable = true